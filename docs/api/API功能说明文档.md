# 中医健康服务平台 - API功能说明文档

## 项目概述
这是一个完整的中医健康服务平台后端系统，提供从用户管理到支付的全链路服务。

**🌐 服务地址**: `http://localhost:8000`
**📚 API文档**: `http://localhost:8000/docs` (自动生成的Swagger文档)

---

## 🔐 认证系统 (`/api/auth`)

### 核心功能
- **用户注册**: 支持邮箱、用户名唯一性验证
- **用户登录**: JWT Token认证机制
- **密码加密**: 使用bcrypt安全哈希
- **Token管理**: 访问令牌和刷新令牌机制

### 主要接口
- `POST /api/auth/register` - 用户注册
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/refresh` - 刷新Token

---

## 👥 用户管理 (`/api/users`)

### 核心功能
- **用户信息管理**: 个人资料的CRUD操作
- **权限管理**: 基于角色的访问控制
- **密码管理**: 密码重置、修改功能
- **邮箱验证**: 邮箱验证机制

### 用户角色
- **普通用户**: 基础服务访问权限
- **管理员**: 系统管理权限
- **超级管理员**: 完整系统控制权限

---

## 🩺 健康咨询 (`/api/consultations`)

### 核心功能
- **咨询记录管理**: 创建、查询健康咨询记录
- **AI问诊**: 智能健康咨询服务
- **专家咨询**: 人工专家咨询服务
- **咨询历史**: 用户咨询记录跟踪

### 服务类型
- 症状咨询
- 用药建议
- 健康评估
- 中医体质分析

---

## 📚 课程教育 (`/api/courses`)

### 核心功能
- **课程管理**: 中医课程的完整生命周期管理
- **学习进度**: 用户学习进度跟踪
- **课程分类**: 多种中医课程分类
- **学习评估**: 课程完成度和效果评估

### 课程特色
- 中医基础理论
- 中药学知识
- 诊疗技术培训
- 健康养生指导

---

## 👨‍⚕️ 专家系统 (`/api/experts`)

### 核心功能
- **专家信息管理**: 专家档案的完整管理
- **专业资质**: 专家资格认证和展示
- **预约系统**: 专家咨询预约功能
- **评价体系**: 专家服务质量评价

### 专家分类
- 中医内科专家
- 中医外科专家
- 针灸推拿专家
- 中药调理专家

---

## 🎥 视频服务 (`/api/video`)

### 核心功能
- **视频通话**: 实时视频咨询功能
- **视频上传**: 教学视频和咨询视频管理
- **视频存储**: 安全的视频文件存储系统
- **流媒体服务**: 优化的视频播放体验

### 技术特点
- 腾讯云视频服务集成
- WebRTC实时通信
- 视频质量自适应
- 多端设备支持

---

## ⚙️ 管理后台 (`/api/admin`)

### 核心功能
- **用户管理**: 用户账户的管理和控制
- **内容管理**: 课程、专家信息的后台管理
- **系统监控**: 系统运行状态和性能监控
- **数据统计**: 平台使用数据的统计分析

### 管理功能
- 用户权限管理
- 内容审核
- 订单管理
- 系统配置

---

## 🛒 商城系统 (`/api/products` + `/api/orders`)

### 产品管理 (`/api/products`)
- **产品展示**: 中医相关产品的完整展示
- **分类管理**: 产品分类和标签系统
- **搜索功能**: 智能产品搜索
- **推荐系统**: 个性化产品推荐

### 订单管理 (`/api/orders`)
- **订单创建**: 完整的购买流程
- **订单跟踪**: 订单状态实时更新
- **订单历史**: 用户购买历史记录
- **退换货**: 售后服务管理

---

## 💰 支付系统 (`可靠支付`)

### 核心特点
- **Ping++集成**: 使用Ping++支付聚合服务
- **多支付方式**: 支持支付宝、微信等主流支付
- **安全可靠**: 完整的支付安全机制
- **支付追踪**: 支付状态实时监控

### 支付流程
1. 创建支付订单
2. 选择支付方式
3. 跳转支付页面
4. 支付结果回调
5. 订单状态更新

---

## 🛡️ 安全特性

### 认证安全
- **JWT Token**: 无状态的安全认证
- **密码加密**: bcrypt哈希算法
- **权限控制**: 基于角色的访问控制
- **Token刷新**: 安全的Token续期机制

### 数据安全
- **SQL注入防护**: SQLAlchemy ORM保护
- **XSS防护**: 输入输出过滤
- **CORS配置**: 跨域访问控制
- **请求日志**: 完整的访问日志记录

---

## 📊 系统架构

### 技术栈
- **Web框架**: FastAPI (高性能异步框架)
- **数据库**: SQLite/PostgreSQL + SQLAlchemy ORM
- **认证**: JWT + python-jose
- **支付**: Ping++ 支付聚合
- **文件存储**: 本地存储 + 静态文件服务

### 部署架构
- **开发环境**: uvicorn --reload
- **生产环境**: Docker + nginx
- **数据库迁移**: Alembic版本管理
- **静态资源**: FastAPI StaticFiles

---

## 🚀 快速开始

### 1. 启动后台服务
```bash
cd backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 2. 访问API文档
打开浏览器访问: `http://localhost:8000/docs`

### 3. 健康检查
```bash
curl http://localhost:8000/health
# 返回: {"status":"healthy"}
```

### 4. API根路径
```bash
curl http://localhost:8000/api/
# 返回: {"message": "中医健康服务平台API", "version": "1.0.0"}
```

---

## 📈 业务价值

### 医疗服务数字化
- **在线问诊**: 突破地域限制的医疗服务
- **专家资源**: 优质中医专家资源整合
- **教育普及**: 中医知识的系统化传播
- **健康管理**: 个性化健康管理方案

### 商业价值
- **会员体系**: 用户付费咨询服务
- **课程销售**: 在线教育课程收费
- **产品商城**: 中医相关产品销售
- **专家预约**: 专家咨询预约服务费

---

## 🔧 维护和扩展

### 数据库管理
```bash
# 生成数据库迁移
alembic revision --autogenerate -m "描述"

# 执行迁移
alembic upgrade head

# 创建测试数据
python create_test_data.py
```

### 系统监控
- **日志系统**: 完整的请求和错误日志
- **性能监控**: API响应时间统计
- **错误追踪**: 异常信息记录和通知
- **健康检查**: `/health` 端点系统状态检查

---

**文档生成时间**: `2025-09-06`
**API版本**: `1.0.0`
**维护状态**: `活跃开发中`

> 这是一个功能完备的中医健康服务平台，涵盖了从用户管理到支付的完整业务流程，可直接用于生产环境部署。